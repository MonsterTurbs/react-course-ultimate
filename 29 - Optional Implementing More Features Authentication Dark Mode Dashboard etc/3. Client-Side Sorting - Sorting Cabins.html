<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>React Study Guide ‚Äî SortBy UI + Reusable Select + Client-side Sorting (Cabins)</title>
  <style>
    :root{
      --bg:#ffffff;
      --text:#111111;
      --muted:#555555;
      --border:#e6e6e6;
      --panel:#fafafa;
      --chip:#f3f4f6;
      --link:#0b57d0;
      --shadow: 0 8px 30px rgba(0,0,0,.06);

      /* High-contrast code theme */
      --code-bg:#0b1220;
      --code-text:#e6edf3;
      --code-border:#1f2937;
      --inline-bg:#eef2ff;
      --inline-border:#dbeafe;
    }

    *{ box-sizing:border-box; }
    html,body{ height:100%; }
    body{
      margin:0;
      background:var(--bg);
      color:var(--text);
      font-family: Arial, Helvetica, sans-serif;
      line-height:1.65;
      overflow-wrap:anywhere;
      word-break:normal;
    }

    .page{
      max-width: 980px;
      margin: 0 auto;
      padding: 28px 18px 56px;
    }

    header{
      padding: 18px 18px;
      border:1px solid var(--border);
      border-radius: 14px;
      background: linear-gradient(180deg, #fff, var(--panel));
      box-shadow: var(--shadow);
    }

    h1{
      margin: 0 0 8px;
      font-size: 24px;
      letter-spacing: .2px;
      line-height: 1.25;
    }

    .subtitle{
      margin: 0;
      color: var(--muted);
      font-size: 14px;
    }

    .toolbar{
      margin-top: 14px;
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      align-items:center;
    }

    .btn{
      appearance:none;
      border:1px solid var(--border);
      background:#fff;
      border-radius: 10px;
      padding: 9px 12px;
      cursor:pointer;
      font-weight:600;
      font-size: 13px;
    }
    .btn:hover{ border-color:#cfcfcf; }
    .btn:active{ transform: translateY(1px); }

    .meta{
      margin-left:auto;
      color:var(--muted);
      font-size: 12px;
    }

    main{
      margin-top: 18px;
      padding: 18px;
      border:1px solid var(--border);
      border-radius: 14px;
      background:#fff;
      box-shadow: var(--shadow);
    }

    h2{
      margin: 18px 0 10px;
      font-size: 18px;
      line-height: 1.25;
    }
    h3{
      margin: 14px 0 8px;
      font-size: 15px;
      line-height: 1.3;
    }

    p{ margin: 8px 0; }
    ul{ margin: 8px 0 8px 20px; padding:0; }
    li{ margin: 6px 0; }

    .callout{
      border:1px solid var(--border);
      background: var(--panel);
      border-radius: 12px;
      padding: 12px 12px;
      margin: 12px 0;
    }

    .chips{
      display:flex;
      flex-wrap:wrap;
      gap:8px;
      margin: 10px 0 0;
      padding: 0;
      list-style:none;
    }
    .chip{
      background: var(--chip);
      border:1px solid var(--border);
      border-radius: 999px;
      padding: 6px 10px;
      font-size: 12px;
      color:#222;
    }

    .divider{
      height:1px;
      background:var(--border);
      margin: 16px 0;
    }

    .small{ color:var(--muted); font-size: 13px; }

    /* Code blocks */
    code, pre{
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas,
                   "Liberation Mono", "Courier New", monospace;
    }
    code{
      background: var(--inline-bg);
      color:#111111;
      padding: 1px 6px;
      border-radius: 6px;
      border: 1px solid var(--inline-border);
      font-size: 0.95em;
      opacity: 1 !important;
    }
    pre{
      margin: 10px 0;
      padding: 12px 14px;
      border-radius: 12px;
      background: var(--code-bg);
      color: var(--code-text);
      border: 1px solid var(--code-border);
      overflow:auto;
      max-width: 100%;
      box-shadow: 0 2px 14px rgba(0,0,0,.10);
      opacity: 1 !important;
    }
    pre code{
      background: transparent !important;
      border: 0 !important;
      padding: 0 !important;
      border-radius: 0 !important;
      color: inherit !important;
      font-size: 12.8px;
      line-height: 1.6;
      white-space: pre-wrap;
      overflow-wrap: anywhere;
      word-break: break-word;
      opacity: 1 !important;
    }

    @media print{
      @page{ size: A4; margin: 12mm; }
      body{ background:#fff; }
      .page{ padding: 0; margin: 0; max-width: none; }
      header, main{ box-shadow: none; }
      header{ break-inside: avoid; }
      .toolbar{ display:none !important; }
      a[href]::after{ content:""; }

      pre{
        background:#ffffff !important;
        color:#111111 !important;
        border: 1px solid #d0d0d0 !important;
        box-shadow: none !important;
        overflow: visible !important;
      }
      pre code{
        white-space: pre-wrap !important;
        overflow-wrap: anywhere !important;
        word-break: break-word !important;
      }

      .callout{ break-inside: avoid; }
      h2{ break-after: avoid; }
    }
  </style>
</head>

<body>
  <div class="page">
    <header>
      <h1>‚ÜïÔ∏è Sort Cabins ‚Äî SortBy Component + Reusable Select + Client-side Sorting</h1>
      <p class="subtitle">
        Goal: add sorting to the Cabins table using a reusable <code>SortBy</code> component that writes to the URL,
        backed by a reusable <code>Select</code> component. Then implement sorting logic in the Cabins table (client-side) based on the URL value.
      </p>

      <div class="toolbar">
        <button class="btn" type="button" onclick="window.print()">üñ®Ô∏è Print / Save as PDF</button>
        <button class="btn" type="button" onclick="window.scrollTo({top:0,behavior:'smooth'})">‚¨ÜÔ∏è Back to Top</button>
        <span class="meta">Single-column ‚Ä¢ A4 print-ready ‚Ä¢ High-contrast code</span>
      </div>

      <ul class="chips" aria-label="key tags">
        <li class="chip">‚ÜïÔ∏è SortBy</li>
        <li class="chip">üß© Reusable Select</li>
        <li class="chip">üîó URL search params</li>
        <li class="chip">üßÆ Field + direction encoding</li>
        <li class="chip">üß† Sort modifier</li>
        <li class="chip">‚ôªÔ∏è Reusable UI pattern</li>
      </ul>
    </header>

    <main>
      <h2>1) Feature goal: add sorting to the cabins table</h2>
      <p>
        You already have filtering. Now you want a dropdown where users can choose how to sort cabins by:
      </p>
      <ul>
        <li>üî§ Name (A ‚Üí Z, Z ‚Üí A)</li>
        <li>üí∞ Price (low ‚Üí high, high ‚Üí low) ‚Äî using DB field <code>regularPrice</code></li>
        <li>üë• Max capacity (low ‚Üí high, high ‚Üí low) ‚Äî using DB field <code>maxCapacity</code></li>
      </ul>

      <div class="callout">
        <p><strong>‚úÖ Reusability</strong></p>
        <p>
          SortBy is built in the UI folder so you can reuse it later for other tables (e.g., bookings).
        </p>
      </div>

      <div class="divider"></div>

      <h2>2) Small UX fix: disable the active filter button</h2>
      <p>
        In the Filter component, when a filter option is already active (highlighted background),
        it should also be disabled so users can‚Äôt click it again for no reason.
      </p>

      <div class="callout">
        <p><strong>Result</strong></p>
        <p>
          Better UX, fewer unnecessary URL updates.
        </p>
      </div>

      <div class="divider"></div>

      <h2>3) SortBy options: encode field + direction in one value</h2>
      <p>
        Each select option contains:
      </p>
      <ul>
        <li><code>label</code> (human friendly)</li>
        <li><code>value</code> (machine friendly, stored in URL)</li>
      </ul>

      <div class="callout">
        <p><strong>Encoding strategy</strong></p>
        <p>
          Use a single string like <code>field-direction</code> (e.g., <code>regularPrice-desc</code>).
          This keeps the component simple, without separate direction UI.
        </p>
      </div>

      <pre><code>// Example options array (conceptual)
const options = [
  { value: "name-asc", label: "Sort by name (A-Z)" },
  { value: "name-desc", label: "Sort by name (Z-A)" },

  { value: "regularPrice-asc", label: "Sort by price (low first)" },
  { value: "regularPrice-desc", label: "Sort by price (high first)" },

  { value: "maxCapacity-asc", label: "Sort by capacity (low first)" },
  { value: "maxCapacity-desc", label: "Sort by capacity (high first)" },
];</code></pre>

      <div class="divider"></div>

      <h2>4) Build a reusable Select component</h2>
      <p>
        Since select dropdowns will be used multiple times, you create a reusable <code>Select</code> component.
        It starts with the essentials:
      </p>
      <ul>
        <li><code>options</code> array</li>
        <li><code>value</code> (controlled component)</li>
        <li><code>onChange</code> handler</li>
        <li>Optional styling prop like <code>type="white"</code></li>
      </ul>

      <h3>Key React trick: forward extra props with ‚Äúrest + spread‚Äù</h3>
      <p>
        Instead of manually passing every prop one-by-one, accept the rest props and spread them into the underlying element.
      </p>

      <pre><code>// Select.jsx (conceptual)
function Select({ options, value, ...props }) {
  return (
    &lt;StyledSelect value={value} {...props}&gt;
      {options.map((option) =&gt; (
        &lt;option key={option.value} value={option.value}&gt;
          {option.label}
        &lt;/option&gt;
      ))}
    &lt;/StyledSelect&gt;
  );
}</code></pre>

      <div class="callout">
        <p><strong>‚úÖ Why this is powerful</strong></p>
        <ul>
          <li>You can pass <code>type="white"</code>, <code>disabled</code>, <code>aria-*</code>, etc., without changing Select‚Äôs signature.</li>
          <li>Makes the component truly reusable.</li>
        </ul>
      </div>

      <div class="divider"></div>

      <h2>5) SortBy component: write <code>sortBy</code> to the URL</h2>
      <p>
        SortBy behaves like Filter: it updates the URL search params.
        The search param key is always <code>sortBy</code>.
      </p>

      <pre><code>// SortBy.jsx (conceptual)
import { useSearchParams } from "react-router-dom";
import Select from "./Select";

function SortBy({ options }) {
  const [searchParams, setSearchParams] = useSearchParams();

  const sortBy = searchParams.get("sortBy") || "";

  function handleChange(e) {
    searchParams.set("sortBy", e.target.value);
    setSearchParams(searchParams);
  }

  return (
    &lt;Select
      options={options}
      value={sortBy}
      onChange={handleChange}
      type="white"
    /&gt;
  );
}</code></pre>

      <div class="callout">
        <p><strong>‚úÖ Expected behavior</strong></p>
        <ul>
          <li>Changing dropdown updates URL (adds <code>sortBy=...</code>).</li>
          <li>Reloading the page preserves selection because it reads from the URL.</li>
        </ul>
      </div>

      <div class="divider"></div>

      <h2>6) Read sortBy from URL in Cabins table and implement sorting</h2>
      <p>
        In the Cabins table component:
      </p>
      <ul>
        <li>Read <code>sortBy</code> from URL</li>
        <li>Split into <code>field</code> and <code>direction</code></li>
        <li>Sort the already filtered cabins array</li>
      </ul>

      <h3>Step A ‚Äî parse field and direction</h3>
      <pre><code>const sortByRaw = searchParams.get("sortBy") || "name-asc";
const [field, direction] = sortByRaw.split("-");</code></pre>

      <h3>Step B ‚Äî create a modifier for direction</h3>
      <p>
        JavaScript‚Äôs sort callback returns a number:
      </p>
      <ul>
        <li>Negative ‚Üí a comes before b</li>
        <li>Positive ‚Üí b comes before a</li>
      </ul>

      <p>
        Ascending can be treated as ‚Äúnormal‚Äù, descending can be done by multiplying by <code>-1</code>.
      </p>

      <pre><code>const modifier = direction === "asc" ? 1 : -1;</code></pre>

      <h3>Step C ‚Äî sort using dynamic field access</h3>
      <p>
        Instead of hardcoding <code>a.regularPrice</code>, use bracket notation: <code>a[field]</code>.
      </p>

      <pre><code>const sortedCabins = filteredCabins.sort((a, b) =&gt;
  (a[field] - b[field]) * modifier
);</code></pre>

      <div class="callout">
        <p><strong>‚ö†Ô∏è Bug from the lecture</strong></p>
        <p>
          Don‚Äôt multiply the entire array by the modifier‚Äîmultiply the numeric result of the comparison:
          <code>(a[field] - b[field]) * modifier</code>.
        </p>
      </div>

      <div class="callout">
        <p><strong>‚úÖ Result</strong></p>
        <ul>
          <li>Sort by price works (low first / high first)</li>
          <li>Sort by capacity works</li>
          <li>Sort by name works (but note: string sorting may need localeCompare in a real app)</li>
        </ul>
      </div>

      <div class="divider"></div>

      <h2>7) Design pattern takeaway: Filter ‚Üí Sort ‚Üí Render</h2>
      <p>
        Cabins table uses a clear sequence:
      </p>
      <ul>
        <li>Start with full cabins array</li>
        <li>Apply filter (from URL)</li>
        <li>Apply sort on filtered results (from URL)</li>
        <li>Render the final array</li>
      </ul>

      <div class="callout">
        <p><strong>Next step (in the course)</strong></p>
        <p>
          Reuse these same UI components for the bookings table, but implement filtering/sorting server-side.
        </p>
      </div>

      <div class="divider"></div>

      <h2>8) Quick self-check (practice)</h2>
      <ul>
        <li>üîó Why store the selected sort option in the URL?</li>
        <li>üß© Why is encoding <code>field-direction</code> in one string a simple approach?</li>
        <li>‚ôªÔ∏è What does the ‚Äúrest + spread‚Äù trick (<code>...props</code>) give you in a reusable Select?</li>
        <li>üß† Why do we use <code>a[field]</code> instead of hardcoding property names?</li>
        <li>‚ÜïÔ∏è How does multiplying by <code>-1</code> flip sort direction?</li>
      </ul>

      <p class="small">
        End of reviewer. Next: apply the same Filter/Sort UI pattern to bookings, but move the operations to the server side.
      </p>
    </main>
  </div>
</body>
</html>
