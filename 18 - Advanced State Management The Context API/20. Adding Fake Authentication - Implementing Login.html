

<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>React Context API ‚Äî Fake Auth (Implementing Login & Logout) | Study Guide</title>
  <style>
    :root {
      --bg: #ffffff;
      --text: #111111;
      --muted: #555555;
      --border: #e6e6e6;
      --soft: #fafafa;
      --codebg: #f6f8fa;
      --accent: #0b57d0;
      --ok: #0a7b34;
      --warn: #8a2a0a;
    }

    * { box-sizing: border-box; }
    html, body { height: 100%; }
    body {
      margin: 0;
      background: var(--bg);
      color: var(--text);
      font-family: Arial, Helvetica, sans-serif;
      line-height: 1.55;
      overflow-wrap: anywhere;
      word-break: break-word;
    }

    .page {
      max-width: 850px;
      margin: 0 auto;
      padding: 28px 18px 60px;
    }

    header {
      border: 1px solid var(--border);
      background: var(--soft);
      padding: 18px 16px;
      border-radius: 12px;
    }

    h1 {
      margin: 0 0 6px;
      font-size: 22px;
      line-height: 1.25;
      letter-spacing: -0.2px;
    }

    .subtitle {
      margin: 0;
      color: var(--muted);
      font-size: 13.5px;
    }

    main { margin-top: 16px; }

    h2 {
      font-size: 17px;
      margin: 18px 0 8px;
      padding-top: 10px;
      border-top: 1px solid var(--border);
    }

    h3 {
      font-size: 14.5px;
      margin: 14px 0 6px;
    }

    p { margin: 8px 0; }

    .callout {
      border: 1px solid var(--border);
      border-left: 5px solid var(--accent);
      background: #fff;
      padding: 12px 12px;
      border-radius: 12px;
      margin: 10px 0;
    }

    .callout.warn { border-left-color: var(--warn); }
    .callout.ok { border-left-color: var(--ok); }

    .callout .title {
      font-weight: 700;
      margin-bottom: 6px;
    }

    ul, ol {
      margin: 6px 0 10px 22px;
      padding: 0;
    }

    li { margin: 6px 0; }

    .pillrow {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      margin-top: 10px;
    }

    .pill {
      border: 1px solid var(--border);
      background: #fff;
      padding: 6px 10px;
      border-radius: 999px;
      font-size: 12.5px;
      color: var(--muted);
      max-width: 100%;
    }

    code, kbd {
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
      font-size: 0.95em;
    }

    pre {
      margin: 10px 0;
      padding: 12px;
      background: var(--codebg);
      border: 1px solid var(--border);
      border-radius: 12px;
      overflow: hidden;
      white-space: pre-wrap;
      word-break: break-word;
      overflow-wrap: anywhere;
    }

    pre code { display: block; }

    .twoCol {
      display: grid;
      grid-template-columns: 1fr;
      gap: 12px;
    }

    .mini {
      font-size: 12.8px;
      color: var(--muted);
    }

    .hr {
      height: 1px;
      background: var(--border);
      border: 0;
      margin: 16px 0;
    }

    .checklist {
      border: 1px dashed var(--border);
      border-radius: 12px;
      padding: 12px;
      background: #fff;
    }

    .q {
      border: 1px solid var(--border);
      border-radius: 12px;
      padding: 12px;
      background: #fff;
      margin: 10px 0;
    }

    .q .qtitle { font-weight: 700; }

    /* Print */
    @page {
      size: A4;
      margin: 14mm;
    }

    @media print {
      body { -webkit-print-color-adjust: exact; print-color-adjust: exact; }
      .page { padding: 0; }
      header { break-inside: avoid; }
      h2, h3, .callout, pre, .checklist, .q { break-inside: avoid; page-break-inside: avoid; }

      /* Remove link URL printing */
      a[href]::after { content: "" !important; }
    }
  </style>
</head>
<body>
  <div class="page">
    <header>
      <h1>üîê Fake Authentication (Context) ‚Äî Implementing Login & Logout</h1>
      <p class="subtitle">
        Single-column, print-friendly reviewer. Topic: wiring the <code>AuthProvider</code> to the app, calling <code>login()</code>/<code>logout()</code>, redirecting after auth, and fixing the ‚ÄúBack button loop‚Äù using <code>replace: true</code>.
      </p>
      <div class="pillrow">
        <div class="pill">üß© Context pattern: Provider + custom hook</div>
        <div class="pill">üß≠ Programmatic navigation: <code>useNavigate()</code></div>
        <div class="pill">üß† Key idea: auth state controls routing</div>
        <div class="pill">‚ö†Ô∏è Demo only: never ship hard-coded passwords</div>
      </div>
    </header>

    <main>
      <section>
        <h2>1) Big Warning (Read This)</h2>
        <div class="callout warn">
          <div class="title">‚ö†Ô∏è Never hard-code real credentials in frontend code</div>
          <p>
            Anything inside a React app is shipped to the browser. If you put a real email/password in the code,
            anyone can inspect it and log in.
          </p>
          <p class="mini">
            This ‚Äúfake auth‚Äù exists only to learn authentication mechanics without building an API + database.
          </p>
        </div>
      </section>

      <section>
        <h2>2) Goal of This Lecture</h2>
        <p>
          Implement the <strong>actual login and logout flows</strong> using a context-based auth state.
          After login, redirect to the app. After logout, redirect to the homepage.
        </p>

        <div class="checklist">
          <div class="title">‚úÖ What you implement (the ‚Äú5-step plan‚Äù)</div>
          <ol>
            <li>Wrap the app with <code>AuthProvider</code> so all components can access auth state.</li>
            <li>On login form submit: call <code>login(email, password)</code>.</li>
            <li>If authenticated: redirect to <code>/app</code> (and fix back-button behavior using <code>replace: true</code>).</li>
            <li>Display the logged-in user via a <code>&lt;User /&gt;</code> component that reads from context.</li>
            <li>Wire the logout button to <code>logout()</code> and redirect to <code>/</code>.</li>
          </ol>
        </div>
      </section>

      <section>
        <h2>3) Step 1 ‚Äî Provide AuthContext to the Whole App</h2>
        <p>
          If the provider is not above your components in the tree, <code>useAuth()</code> will return <code>undefined</code>
          (or your custom hook should throw an error).
        </p>

        <h3>Typical setup in <code>main.jsx</code> (or <code>App.jsx</code>)</h3>
        <pre><code>// main.jsx (example)
import React from "react";
import ReactDOM from "react-dom/client";
import App from "./App.jsx";

import { CitiesProvider } from "./context/CitiesContext.jsx";
import { AuthProvider } from "./context/FakeAuthContext.jsx";

ReactDOM.createRoot(document.getElementById("root")).render(
  &lt;React.StrictMode&gt;
    &lt;AuthProvider&gt;
      &lt;CitiesProvider&gt;
        &lt;App /&gt;
      &lt;/CitiesProvider&gt;
    &lt;/AuthProvider&gt;
  &lt;/React.StrictMode&gt;
);
</code></pre>

        <div class="callout">
          <div class="title">üß† Provider order</div>
          <p>
            Often the order doesn‚Äôt matter. But if <code>CitiesProvider</code> needs auth state, then
            <code>AuthProvider</code> must be its parent.
          </p>
        </div>
      </section>

      <section>
        <h2>4) Step 2 ‚Äî Login Form: Call <code>login(email, password)</code></h2>
        <p>
          The login page already holds <code>email</code> and <code>password</code> in local state (controlled inputs).
          On submit, call the context <code>login</code> function.
        </p>

        <h3>Login handler (core idea)</h3>
        <pre><code>import { useAuth } from "../context/FakeAuthContext";

function Login() {
  const { login } = useAuth();

  const [email, setEmail] = useState("fake@user.com");
  const [password, setPassword] = useState("1234");

  function handleSubmit(e) {
    e.preventDefault();

    if (!email || !password) return;

    login(email, password);
  }

  // ... JSX form with onSubmit={handleSubmit}
}
</code></pre>

        <div class="callout ok">
          <div class="title">‚úÖ What ‚Äúsuccess‚Äù means here</div>
          <p>
            After calling <code>login</code>, your auth reducer should set:
          </p>
          <ul>
            <li><code>user</code> to the fake user object</li>
            <li><code>isAuthenticated</code> to <code>true</code></li>
          </ul>
        </div>

        <div class="callout warn">
          <div class="title">‚ö†Ô∏è Keeping it simple</div>
          <p>
            If credentials are wrong, you may show an error message on the UI. This lecture keeps it minimal
            (no detailed error UI).
          </p>
        </div>
      </section>

      <section>
        <h2>5) Step 3 ‚Äî Redirect After Login (and Fix Back Button Loop)</h2>
        <p>
          Once auth state becomes true, redirect to <code>/app</code> using programmatic navigation.
          The best place is an effect that watches <code>isAuthenticated</code>.
        </p>

        <h3>Redirect with <code>useEffect</code> + <code>useNavigate</code></h3>
        <pre><code>import { useEffect } from "react";
import { useNavigate } from "react-router-dom";
import { useAuth } from "../context/FakeAuthContext";

function Login() {
  const navigate = useNavigate();
  const { isAuthenticated } = useAuth();

  useEffect(() =&gt; {
    if (isAuthenticated) {
      navigate("/app", { replace: true });
    }
  }, [isAuthenticated, navigate]);

  // ...
}
</code></pre>

        <div class="callout">
          <div class="title">üß≠ Why <code>replace: true</code> matters</div>
          <p>
            Without <code>replace: true</code>, the login page stays in browser history.
            Pressing Back would go to <code>/login</code>, then immediately redirect again to <code>/app</code>
            (a confusing ‚ÄúBack button loop‚Äù).
          </p>
        </div>
      </section>

      <section>
        <h2>6) Step 4 ‚Äî Show Logged-in User via <code>&lt;User /&gt;</code></h2>
        <p>
          Remove the ‚Äúfake user‚Äù from the <code>User.jsx</code> component and read the real state from context.
          Then render <code>&lt;User /&gt;</code> inside the app layout.
        </p>

        <h3>User component idea</h3>
        <pre><code>import { useAuth } from "../context/FakeAuthContext";

function User() {
  const { user } = useAuth();

  // Guard (optional): if user is null, render nothing
  if (!user) return null;

  return (
    &lt;div className="user"&gt;
      &lt;span&gt;üë§ {user.name}&lt;/span&gt;
      &lt;button&gt;Logout&lt;/button&gt;
    &lt;/div&gt;
  );
}
</code></pre>

        <div class="callout">
          <div class="title">üß† Why the guard helps</div>
          <p>
            After logout, <code>user</code> becomes <code>null</code>. If your JSX accesses <code>user.name</code> without checking,
            you will get a runtime error.
          </p>
        </div>
      </section>

      <section>
        <h2>7) Step 5 ‚Äî Logout + Redirect to Home</h2>
        <p>
          On logout click, call <code>logout()</code> and then redirect to <code>/</code>.
          This is another case where programmatic navigation is the right tool.
        </p>

        <h3>Logout click handler</h3>
        <pre><code>import { useNavigate } from "react-router-dom";
import { useAuth } from "../context/FakeAuthContext";

function User() {
  const navigate = useNavigate();
  const { user, logout } = useAuth();

  if (!user) return null;

  function handleLogout() {
    logout();
    navigate("/");
  }

  return (
    &lt;div className="user"&gt;
      &lt;span&gt;üë§ {user.name}&lt;/span&gt;
      &lt;button onClick={handleLogout}&gt;Logout&lt;/button&gt;
    &lt;/div&gt;
  );
}
</code></pre>

        <div class="callout warn">
          <div class="title">‚ö†Ô∏è Small but important detail</div>
          <p>
            If you logout but stay on a protected route (like <code>/app</code>), you may cause errors or expose UI.
            Redirecting to <code>/</code> (or <code>/login</code>) avoids that.
          </p>
        </div>
      </section>

      <section>
        <h2>8) What‚Äôs Next: Protecting Routes</h2>
        <p>
          If a user refreshes the browser on <code>/app</code> while not authenticated, the app should not crash or show private UI.
          The next lecture implements route protection (often with a <code>ProtectedRoute</code> component).
        </p>

        <div class="callout">
          <div class="title">üîí Core rule</div>
          <p>
            If <code>isAuthenticated</code> is false, you should block access to app routes and redirect to <code>/login</code>.
          </p>
        </div>
      </section>

      <hr class="hr" />

      <section>
        <h2>9) Common Mistakes (Fast Debug Guide)</h2>
        <ul>
          <li>
            <strong>‚ÄúCannot destructure login from useAuth()‚Äù</strong> ‚Üí usually means your provider is missing OR your hook isn‚Äôt returning the context value.
          </li>
          <li>
            <strong>‚Äúuser is null‚Äù crash</strong> ‚Üí you‚Äôre reading <code>user.name</code> after logout without guarding <code>if (!user) return null</code>.
          </li>
          <li>
            <strong>Back button keeps bouncing</strong> ‚Üí fix with <code>navigate("/app", { replace: true })</code> on login redirect.
          </li>
          <li>
            <strong>Redirect never happens</strong> ‚Üí make sure you watch <code>isAuthenticated</code> in the dependency array.
          </li>
        </ul>
      </section>

      <section>
        <h2>10) Mini Quiz (Quick Recall)</h2>

        <div class="q">
          <div class="qtitle">üß™ Q1: Why is hard-coding real passwords in React code dangerous?</div>
          <p class="mini">Answer idea: Because the browser downloads your bundled JS; anyone can inspect it.</p>
        </div>

        <div class="q">
          <div class="qtitle">üß™ Q2: What problem does <code>replace: true</code> solve after login?</div>
          <p class="mini">Answer idea: Prevents the login page from staying in history and causing a Back-button redirect loop.</p>
        </div>

        <div class="q">
          <div class="qtitle">üß™ Q3: After logout, why might the app crash if you don‚Äôt redirect?</div>
          <p class="mini">Answer idea: Components may still render and try to read properties from <code>user === null</code>.</p>
        </div>
      </section>

      <section>
        <h2>11) Key Takeaways</h2>
        <ul>
          <li>üîë Auth in React is mostly about <strong>state + redirects</strong>.</li>
          <li>üß© Context makes auth state accessible anywhere without prop drilling.</li>
          <li>üß≠ <code>useNavigate</code> enables redirects after async or conditional logic.</li>
          <li>üß† Use <code>replace: true</code> to keep browser navigation behavior intuitive.</li>
          <li>üîí Next: protect routes so unauthorized users can‚Äôt access <code>/app</code>.</li>
        </ul>
      </section>

      <p class="mini">End of reviewer.</p>
    </main>
  </div>
</body>
</html>